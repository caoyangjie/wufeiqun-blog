## 背景介绍

工作中经常需要去配置nginx的转发规则, 特别复杂的规则又记不住, 所以采用把工作中的每个例子都记下来的策略来学习这些规则.


## 真实场景记录

#### 旧页面下线

旧的页面下线, 有一批次的地址需要跳转到同一个新的地址, 这批地址同时也包括以该地址开头的地址, 真实的配置如下:

```nginx
location ~* (/database/drugde/index|NextPharma/crt/index) {
    return 301 https://www.new-address.com;
}

# 解释

1. location后面的 ~* 表示的是不区分大小写的正则匹配, 后面跟的是正则表达式;
2.  ~ 表示的是区分大小写的正则匹配, 后面也是要跟正则表达式
3. ^~ 否定正则也就是最长匹配, 但是优先级比正则靠前, 并且匹配以后就停止搜索, 后面跟的是单个URI 
```

<img width="1336" alt="image" src="https://github.com/wufeiqun/blog/assets/7486508/9f9d2394-a81b-4aa6-9cdb-b69d528c2e77">


